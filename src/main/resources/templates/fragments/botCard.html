{#fragment id=botCard}

{#for bot in allBots}
<div class="col-md-4 mb-4">
    <div class="card bot-card bg-dark text-light border-neon-neon position-relative p-3">

        <!-- Delete Button (Top-Right) -->
        <form method="post" action="/bots/delete" class="position-absolute top-0 end-0 m-2">
            <input type="hidden" name="botId" value="{bot.id}">
            <button type="submit" class="btn btn-neon-red btn-sm">âœ–</button>
        </form>

        <div class="card-body">
            <h5 class="card-title text-neon-glow text-uppercase mb-4">{bot.parameters.botType}</h5>

            <!-- Status -->
            <p class="neon-label">
                Status:
                <span class="{bot.running ? 'text-glow-green animate-running' : 'text-glow-red'} fw-bold">
                    {bot.running ? 'RUNNING' : 'IDLE'}
                </span>
            </p>

            <!-- Bot Info -->
            <p class="neon-label">Last RSI: <span class="text-neon-glow">{bot.status.lastRsi ?: 'N/A'}</span></p>
            <p class="neon-label">Last SMA short: <span class="text-neon-glow">{bot.status.lastSmaShort ?: 'N/A'}</span></p>
            <p class="neon-label">Actual Support: <span class="text-neon-glow">{bot.status.actualSupport ?: 'N/A'}</span></p>
            <p class="neon-label">Actual Resistance: <span class="text-neon-glow">{bot.status.actualResistance ?: 'N/A'}</span></p>
            <p class="neon-label">Last price: <span class="text-glow-green">${bot.status.lastPrice ?: 'N/A'}</span></p>
            <p class="neon-label">Last purchase price: <span class="text-glow-green">${bot.status.purchasePrice ?: 'N/A'}</span></p>
            <p class="neon-label">Last update: <span class="text-neon-glow">{bot.status.purchaseTime ?: 'N/A'}</span></p>

            <!-- Controls -->
            <div class="d-flex flex-wrap gap-2 mt-5">
                <a href="/bots/{bot.running ? 'stop' : 'start'}/{bot.id}" methods="" class="btn btn-outline-neon-{bot.running ? 'red' : 'green'} btn-sm "> {bot.running ? 'Stop' : 'Run'} </a>
                <!--<a href="/bots/edit/{bot.id}" class="btn btn-outline-neon btn-sm">Edit</a>-->
                <a href="/bots/details/{bot.id}" class="btn btn-outline-neon btn-sm">More Info</a>
            </div>
        </div>
    </div>
</div>
{/for}



{/fragment}