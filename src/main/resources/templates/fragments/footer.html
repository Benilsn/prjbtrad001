{#fragment id=footer}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
      async function fetchPrices() {
        try {
          const symbols = "{workingSymbols ?: ''}".split(',');
          const params = new URLSearchParams({
            symbols: JSON.stringify(symbols)
          });

          const response = await fetch('/refresh-data?' + params);
          const data = await response.json();
          console.log("Fetched data:", data);

          const btcData = data.find(crypto => crypto.symbol === 'BTCUSDT');
          console.log("BTC Data:", btcData);

          for (const crypto of data) {
            const symbol = crypto.symbol;
            const price = crypto.price;
            const lastUpdated = crypto.lastUpdated;
            const label = crypto.description;

            const labelEl = document.getElementById(symbol + '-label');
            const priceEl = document.getElementById(symbol + '-price');
            const updatedEl = document.getElementById(symbol + '-updated');

            if (priceEl && updatedEl && labelEl) {
              labelEl.textContent = 'Pre√ßo de ' + symbol;
              priceEl.textContent = price;
              updatedEl.textContent = lastUpdated;
            } else {
              console.warn("No element found for symbol: " + symbol);
            }
          }
      } catch (error) {
        console.error('Error fetching prices:', error);
      }
    }

  if (window.location.pathname === "/") {
    fetchPrices();
    setInterval(fetchPrices, 2000);
  }
  });

  document.addEventListener('DOMContentLoaded', function () {
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl);
    });
  });
</script>


<footer class="bg-dark text-light py-3 fixed-bottom border-top border-secondary">
    <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center">

        <p class="mb-2 mb-md-0 neon-text fw-semibold mb-0">
            CryptoBot &copy; 2025
        </p>

        <div class="d-flex gap-3">
            <a href="https://github.com/Benilsn" target="_blank"
               class="text-info d-flex align-items-center text-decoration-none neon-link" aria-label="GitHub">
                <i class="bi bi-github fs-5 me-1"></i> GitHub
            </a>
            <a href="#" target="_blank" class="text-info d-flex align-items-center text-decoration-none neon-link"
               aria-label="Discord">
                <i class="bi bi-discord fs-5 me-1"></i> Discord
            </a>
            <a href="#" target="_blank" class="text-info d-flex align-items-center text-decoration-none neon-link"
               aria-label="Contact">
                <i class="bi bi-envelope fs-5 me-1"></i> Contact
            </a>
        </div>

    </div>
</footer>

{/fragment}